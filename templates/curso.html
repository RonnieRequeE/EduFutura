<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{{ curso.titulo }}</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    
    <!-- T√≠tulo y descripci√≥n -->
    <h2>{{ curso.titulo }}</h2>
    <div class="tarjeta">
        <h3>{{ curso.nombre }}</h3>
    </div>

    <!-- M√≥dulos del curso -->
    <div class="tarjeta">
        <div class="encabezado-modulo">
        <h3>M√≥dulos del curso</h3>
        {% if session['rol'] == 'docente' %}
            <a href="/crear_modulo/{{ id }}">
                <button>Crear m√≥dulo</button>
            </a>
        {% endif %}
        </div>
        <div class="grid-modulos">
        {% for modulo in curso.modulos %}
            <div class="mini-modulo">
            <h4>{{ modulo.titulo }}</h4>
            <p class="modulo-descripcion">{{ modulo.descripcion }}</p>
            <p><strong>{{ modulo.inicio }} ‚Üí {{ modulo.cierre }}</strong></p>

            {% if modulo.etiquetas %}
                <div class="modulo-etiquetas">
                {% for etiqueta in modulo.etiquetas %}
                    <span class="chip">{{ etiqueta }}</span>
                {% endfor %}
                </div>
            {% endif %}

            {% if session['rol'] == 'docente' %}
                <a href="/editar_modulo/{{ modulo.id }}">
                    <button class="boton-editar">‚úèÔ∏è Editar</button>
                </a>
            {% endif %}
            </div>
        {% else %}
            <p>No hay m√≥dulos creados a√∫n.</p>
        {% endfor %}
        </div>

    </div>

    <div class="tarjeta acceso-evaluacion">
    <h3>¬øListo para poner a prueba tus conocimientos?</h3>
    <p>Selecciona una evaluaci√≥n para comenzar:</p>

    <div class="grid-evaluaciones">
        {% for evaluacion in evaluaciones_activas %}
        <a href="/evaluacion/{{ evaluacion.id }}" class="tarjeta-evaluacion">
        <h4>{{ evaluacion.titulo }}</h4>
        <p>
            {% if evaluacion.estado == 'completada' %}
            ‚úÖ Respondida
            {% else %}
            ‚è≥ Pendiente
            {% endif %}
        </p>
        <p>
            {% if evaluacion.calificada %}
            ‚úÖ Calificada ‚Äî Nota: {{ evaluacion.nota }}
            {% else %}
            üïì Sin calificar
            {% endif %}
        </p>
        <small>M√≥dulo: {{ evaluacion.modulo }}</small>
        </a>
        {% else %}
        <p style="text-align: center;">No hay evaluaciones activas por ahora.</p>
        {% endfor %}
    </div>
    </div>


    <!-- Notas del curso -->
    <div class="tarjeta notas-curso">
        <h3>Notas del curso</h3>
        <table class="tabla-notas">
            <tr>
                <th>M√≥dulo</th>
                <th>Evaluaci√≥n</th>
                <th>Nota</th>
            </tr>
            <tr>
                <td>Variables y Tipos</td>
                <td>Quiz de introducci√≥n</td>
                <td>85</td>
            </tr>
            <tr>
                <td>Condicionales</td>
                <td>Ejercicio pr√°ctico</td>
                <td>90</td>
            </tr>
            <tr>
                <td>Funciones</td>
                <td>Evaluaci√≥n final</td>
                <td>75</td>
            </tr>
        </table>
    </div>

    <div class="resumen-final">
        <p><strong>Promedio final:</strong> {{ promedio }} / Estado: <span>{{ estado }}</span></p>
    </div>

    <!-- Progreso del curso -->
    <div class="progreso-container">
        <label>Progreso del curso:</label>
        <div class="barra-progreso">
            <div class="barra-avance" style="width: 60%;"></div>
        </div>
        <span class="porcentaje">60% completado</span>
    </div>

    <a href="/panel">‚Üê Volver al panel</a>
    
    <!-- Script para desplegar logout -->
    <script>
      function toggleDropdown() {
        const menu = document.getElementById('dropdown-menu');
        menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
      }
      
    </script>
</body>
</html>
